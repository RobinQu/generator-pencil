{"name":"Generator-pencil","tagline":"Yeoman generator for static sites like Github Pages","body":"# generator-pencil\r\n\r\n如果你有想过利用免费的Github服务来托管静态站点，你就一定用过不少站点生成器。大名鼎鼎的[Jeklly](http://jekyllrb.com/)，以及它的增强型变种[Octopress](http://octopress.org/)。\r\n\r\n在你阅读了各式各样的教程、API文档之后，你终于开始写下第一篇博文。到这里还算是不错的体验，但是一段时间之后：\r\n\r\n* 这些软件的`preview`和`build`慢如蜗牛\r\n* 各式各样的`plugin`、`theme`看起来美好，但是\r\n    * 你却完全不知道它在干什么，还需要继续阅读一堆文档来正确配置它。\r\n    * 它会让你的`build`更慢\r\n    * 它会让你的页面浏览更慢\r\n* 你愿意为任何小功能来来实现一个简单的小功能么？\r\n\r\n## Small, fast, and simple\r\n\r\n[generator-pencil](https://github.com/RobinQu/generator-pencil)是一个yeoman generator。这个工具的特性：\r\n\r\n* 使用`Markdown`来存储文章内容和附加数据(`metadata`)\r\n* 使用`Handlebar`来渲染页面，同时提供更强大的模板功能(partial、helpers等)\r\n* 整体流程的自动化工作则由`Grunt`和一些子任务(`build`、`preview`、`deploy`)完成\r\n\r\n如果你不明白上面这些工具也没关系，因为，大多数情况下，你可以不必修改任何配置。简单的模板和js文件，你也可以随意修改，事情比你想象中的简单得多。\r\n\r\n## 安装\r\n\r\n```\r\nnpm install yo grunt-cli -g\r\nnpm install generator-pencil\r\n```\r\n\r\n> 由于要使用更快速的`node-scss`作为样式表编译操作；而`node-scss`目前[不支持](https://github.com/andrew/node-sass/pull/188)`node v0.11.x`。所以目前来说，本模块目前也不支持最新的`node`。不过你可以将`node-scss`从任务列表中删除，这样将没有使用最新版`node`的限制。\r\n\r\n\r\n## 创建第一个站点\r\n\r\n```\r\nmkdir mysite && cd mysite\r\nyo pencil\r\n```\r\n\r\n接下来，你会看到一些可交互的命令行提示：\r\n\r\n* 首先是询问站定名称，看起来`rural-potato`不是太好的名字，你最好写上更帅的名字\r\n\r\n![Ask for sitename](./Screen Shot 2014-05-14 at 下午12.46.40.png)\r\n\r\n* 然后会询问Github上，该站点的git地址，你应该填写ssh协议的地址，例如`git@github.com:RobinQu/mysite.git`。该地址的的`gh-pages`分支将会成为我们部署的目标。当然，你可以直接输入`回车`跳过这个步骤，之后再整合你自己的部署流程。\r\n\r\n![Ask for git](./Screen Shot 2014-05-14 at 下午12.48.45.png)\r\n\r\n* 请问站点的作者名称？你是`Grea writer`么？\r\n\r\n![Ask for author](./Screen Shot 2014-05-14 at 下午1.02.01.png)\r\n\r\n* 你的站点URL将会是什么？请不要将URL的结尾加上`/`。例如，我的个人博客是 `http://robinqu.me`，而不是`http://robinqu.me/`。\r\n\r\n![Ask for url](./Screen Shot 2014-05-14 at 下午1.05.16.png)\r\n\r\n* 是否启用[Disqus](http://disqus.com/)作为你的评论系统。如果需要Disqus，请输入你的Disqus ID：\r\n\r\n![Ask for disqus](./Screen Shot 2014-05-14 at 下午1.10.56.png)\r\n\r\n* 在哪里储存你的`Markdown`文档？默认是`src/contents/blog`文件夹，建议不修改。\r\n\r\n![Ask for src](./Screen Shot 2014-05-14 at 下午1.12.50.png)\r\n\r\n这是该向导最后一个问题，接下来程序会帮你安装各种依赖的工具和插件。\r\n\r\n安装完成后，你得到一个如下的目录结构：\r\n\r\n![Folder structure](./Screen Shot 2014-05-14 at 下午1.17.55.png)\r\n\r\n其实，程序还偷偷帮你新建了一篇文章，名字叫`A Brand new page`。\r\n\r\n文章放在`src/contents/blog`文件夹下，并按照年、月、日分组。打开这篇新创建的文章：\r\n\r\n```\r\n---\r\ntitle: brand new page\r\ndate: Wed May 14 2014 13:13:36 GMT+0800 (CST)\r\ntemplate: article\r\n---\r\nEnter your content here\r\n```\r\n\r\n内容十分简单，但是开头的这些代码，不少人会熟悉。对，和`Octopress`等一样，`geneartor-pencil`也支持在`Markdown`内嵌入[YAML](http://www.yaml.org/)格式的数据，作为这篇文档的属性信息。有一些属性是有特殊意义的，例如`title`。这里详细的定义，请[参考文档](https://github.com/RobinQu/grunt-writer#write-a-markdown)。\r\n\r\n## 我要看效果！\r\n\r\n如果你之前选择了发布到`Github`，并填写了GIT地址，那么你要确保当前项目的文件夹是一个初始化过的`Git working copy`：\r\n\r\n```shell\r\n# 初始化git版本库\r\ngit init\r\n# 添加你的实际GIT版本库的远程地址\r\ngit remote add origin <your git repo url>\r\n# 添加目前的改动\r\ngit add .\r\n# 进行第一次提交\r\ngit commit -a -m \"站点的起点\"\r\n```\r\n无论是写了文章，还是修改了配置，在进行预览或发布之前都**必须**进行提交。否则，你看到的将不会是你期望的内容。\r\n\r\n说了这么多，我们终于可以看看效果了：\r\n\r\n```\r\ngrunt preview\r\n```\r\n\r\n这个命令会在本地的9000端口开启一个HTTP服务器。正常的输出开启是这样。你可以不关注输出内容，但你需要知道，当出现`Waiting`字样时，代表所有任务都完成了， 你可以打开[http://localhost:9000/](http://localhost:9000/)看看了。\r\n\r\n```\r\n$ grunt preview\r\nRunning \"revision\" task\r\nHEAD at revision 88e0eba\r\n\r\nRunning \"clean:build\" (clean) task\r\n\r\nRunning \"writer:all\" (writer) task\r\n\r\nRunning \"concurrent:build\" (concurrent) task\r\n    \r\n    Running \"imagemin:dist\" (imagemin) task\r\n    Minified 0 images (saved 0 B)\r\n    \r\n    Done, without errors.\r\n    \r\n    \r\n    Execution Time (2014-05-14 05:35:46 UTC)\r\n    loading tasks  3ms  ▇▇▇▇▇▇▇▇▇▇▇▇ 25%\r\n    imagemin:dist  9ms  ▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇ 75%\r\n    Total 12ms\r\n        \r\n    Running \"sass:build\" (sass) task\r\n    File dist/css/blog.css created.\r\n    \r\n    Done, without errors.\r\n    \r\n    \r\n    Execution Time (2014-05-14 05:35:46 UTC)\r\n    loading tasks   3ms  ▇▇▇▇▇▇▇▇ 17%\r\n    sass:build     14ms  ▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇ 78%\r\n    Total 18ms\r\n        \r\n    Running \"svgmin:dist\" (svgmin) task\r\n    Total saved: 0 B\r\n    \r\n    Done, without errors.\r\n    \r\n    \r\n    Execution Time (2014-05-14 05:35:46 UTC)\r\n    loading tasks   3ms  ▇▇▇▇ 7%\r\n    svgmin:dist    43ms  ▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇ 93%\r\n    Total 46ms\r\n        \r\n    Running \"htmlmin:dist\" (htmlmin) task\r\n    Minified dist/about.html 1.86 kB → 1.51 kB\r\n    Minified dist/archive.html 2.31 kB → 1.67 kB\r\n    Minified dist/blog/2014/5/14/brand-new-page/index.html 2.72 kB → 2.28 kB\r\n    Minified dist/index.html 2.04 kB → 1.68 kB\r\n    Minified dist/page/1/index.html 2 kB → 1.64 kB\r\n    \r\n    Done, without errors.\r\n    \r\n    \r\n    Execution Time (2014-05-14 05:35:46 UTC)\r\n    loading tasks   3ms  ▇▇▇▇▇ 9%\r\n    htmlmin:dist   31ms  ▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇ 89%\r\n    Total 35ms\r\n        \r\n    Running \"copy:resources\" (copy) task\r\n    Created 35 directories, copied 179 files\r\n    \r\n    Done, without errors.\r\n    \r\n    \r\n    Execution Time (2014-05-14 05:35:46 UTC)\r\n    loading tasks     2ms  ▇ 1%\r\n    copy:resources  190ms  ▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇ 98%\r\n    Total 193ms\r\n    \r\nRunning \"connect:preview\" (connect) task\r\nStarted connect web server on http://0.0.0.0:9000\r\n\r\nRunning \"watch\" task\r\nWaiting...\r\n```\r\n看起来一切正常，我们打开[http://localhost:9000/](http://localhost:9000/)。\r\n\r\n![Home page](./Screen Shot 2014-05-14 at 下午1.40.36.png)\r\n\r\n事情就是这么简单！你已经可以在这个简单的站点里面转转了。事实上，程序已经帮你做好了这些页面：\r\n\r\n* 首页 `/`\r\n* 介绍页面 `/about.html`\r\n* 归档页面 `/archve.html`\r\n* 文章列表页面 `/page/{page}`\r\n\r\n## 创建新文章 \r\n\r\n如何创建新文章？\r\n\r\n```\r\nyo pencil:post \"Another post\"\r\n```\r\n\r\n![new post](./Screen Shot 2014-05-14 at 下午1.52.14.png)\r\n\r\n新的文章就生成好了；打开你喜欢的Markdown编辑器开始写作吧！\r\n\r\n## 发布到线上\r\n\r\n同样也是一条命令：\r\n\r\n```\r\ngrunt deploy\r\n```\r\n\r\n你可以到你之前设置的线上地址查收部署结果了。\r\n\r\n## 接下来...\r\n\r\n* 了解更多配置信息，例如自定义页面等：\r\n    * [grunt-writer](https://github.com/RobinQu/grunt-writer): 这是`generator-pencil`的力量来源，大部分逻辑存在于这个Grunt任务重\r\n    * [marked](https://github.com/chjj/marked)：这是完成Markdown向HTML转换的重要组建。速度是它的强项。\r\n    * [build-control](https://github.com/robwierzbowski/grunt-build-control)：这是完成GIT发布的模块。\r\n* 如果你想添加Google统计、广告，直接试试编辑`src/templates/partials/footer.hbs`这个模板吧，这和普通Web开发没有什么区别\r\n* 如果你想从`Octopress`迁移你的Markdown文档，这也是没有压力的，`generator-pencil`完全兼容这些文档。你需要做的就是文件拷贝工作。\r\n* 遇到问题的话就来问我咯：\r\n    * [提交BUG](https://github.com/RobinQu/generator-pencil/issues?state=open)\r\n    * [电子邮件](mailto://robinqu@gmail.com)\r\n    * [@ELFVision](http://weibo.com/robinqu/profile)","google":"UA-313435-12","note":"Don't delete this file! It's used internally to help with page regeneration."}